@model TolabPortal.DataAccess.Models.SubCategoryResponse

@{
    ViewBag.CurrentPageTitle = "اختر الصف";
    var items = new string[] { "الرئيسية", "اختر الصف" };
    ViewBag.MenuItems = items;
}


<div class="col-lg-7 mx-auto">
    @if (ViewBag.ErrorMessage != null)
    {
        <div class="alert alert-danger2 alert-dismissible fade show course-alert-info">
            <div class="d-flex align-items-center">
                <i class="la la-info-circle fs-30 mr-2"></i> @ViewBag.ErrorMessage
            </div>
            <button type="button" class="close fs-20 pd-16" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true" class="la la-times"></span>
            </button>
        </div>
    }

    <div class="card card-item">
        <div class="card-body">
            <form class="pt-2" method="post" asp-action="RegisterSubCategory" asp-controller="Interest">
                <p class="mb-4 fontbb"> @Model.SelectedCategory.NameLT </p>
                <div class="payment-option-wrap">
                    @for (int i = 0; i < Model.SubCategories.Count; i++)
                    {
                        <div class="payment-tab noshadbord">
                            @{
                                var subCategory = Model.SubCategories[i];
                            }
                            <div class="payment-tab-toggle">
                                <input type="radio" id="@(subCategory.Id)" name="subCategoryId" value="@(subCategory.Id)">
                                <label for="@(subCategory.Id)">@(subCategory.NameLT)</label>
                            </div>
                            <div class="payment-tab-content">
                                @for (int j = 0; j < subCategory.Departments.Count; ++j)
                                {
                                    var department = subCategory.Departments[j];
                                    <div class="custom-control custom-checkbox fs-15">
                                        <input type="checkbox" class="custom-control-input" id="@(department.Id)" value="@(department.Id)" name="departmentIds">
                                        <label class="custom-control-label custom--control-label w-100" for="@(department.Id)">@department.NameLT</label>
                                    </div>
                                    <!-- end custom-control -->
                                }

                            </div>
                        </div><!-- end payment-tab -->



                    }
                </div>
                <div class="btn-box align-items-center justify-content-between mt-2 pullone">
                    <a href="@Url.Action("RegisterSection")" class="btn-text linkunder2">رجوع</a>
                    <button type="submit" class="btn theme-btn ml-3 ">تخصيص <i class="la la-arrow-right icon ml-1"></i></button>
                </div><!-- end btn-box -->
            </form>
        </div><!-- end card-body -->
    </div><!-- end card -->
</div>

@section Scripts
{
    <script>

        $(function () {
            $('input[type=radio][name=subCategoryId]').change(function () {
                console.log("selected");

                var firstDepartment = $(this).parent().next().children().find('input[type=checkbox][name=departmentIds]').first();
                $('input[type=checkbox]').prop('checked', false).change();

                if (firstDepartment != null) {
                    $(firstDepartment).prop("checked", true).change();
                }

            });
        });
    </script>
}
